---
title: End-to-End Testing
description: Comprehensive testing guide for ARK applications using Chainsaw and Hurl
---

# End-to-End Testing

Ark uses [Chainsaw](https://github.com/kyverno/chainsaw) to declaratively create resources, run scripts, and validate resources. For example, we can create agents, teams, and queries and validate the statuses of each and the success state of a query or evaluation.

## Setup

Install chainsaw for running tests locally:

```bash
# Install with Go
go install github.com/kyverno/chainsaw@latest

# Install with Homebrew
brew tap kyverno/chainsaw https://github.com/kyverno/chainsaw
brew install kyverno/chainsaw/chainsaw
```

## Running Tests Locally

To replicate the GitHub workflow environment locally:

```bash
# Optionally install k3d and create test cluster. If you are already running a
# cluster locally there is no need to run this step.
brew install k3d
k3d cluster create ark-e2e

# Set LLM config if you want to run tests that call models.
export E2E_TEST_AZURE_OPENAI_KEY=yourkey
export E2E_TEST_AZURE_OPENAI_BASE_URL=yoururl

# Run standard tests. Choose a specific path rather than '.' to run only a
# specific scenario.
chainsaw test --config .chainsaw.yaml --selector '!evaluated' .
```

## Troubleshooting Tests

The following flags are extremely useful for troubleshooting test issues:

- `--pause-on-failure`: stop the test execution on the first failure - don't delete resources
- `--fail-fast`: abort immediately on first failure
- `--skip-delete`: don't delete the test resources or namespace at the end of the run (makes it easier to inspect resources)

As an example, to run the full suite and pause as soon as there is any failure and allow the operator to inspect resources:

```bash
chainsaw test --config .chainsaw.yaml --selector '!evaluated' --pause-on-failure .
```
